{"map":"{\"version\":3,\"sources\":[\"static/js/main.ad127158.chunk.js\"],\"names\":[\"this\",\"push\",\"23\",\"module\",\"__webpack_exports__\",\"__webpack_require__\",\"Buffer\",\"d\",\"aws_saveTaskData\",\"aws_fetchLink\",\"https\",\"querystring\",\"config\",\"encryptedMetadata\",\"data\",\"Promise\",\"resolve\",\"reject\",\"postData\",\"stringify\",\"encrypted_metadata\",\"postOptions\",\"hostname\",\"awsLambda\",\"saveTaskData\",\"host\",\"port\",\"path\",\"method\",\"headers\",\"Content-Type\",\"Content-Length\",\"byteLength\",\"req\",\"request\",\"res\",\"setEncoding\",\"on\",\"e\",\"debug\",\"console\",\"log\",\"write\",\"end\",\"fetchLink\",\"body\",\"call\",\"40\",\"exports\",\"JSON\",\"parse\",\"45\",\"57\",\"59\",\"71\",\"72\",\"91\",\"r\",\"react\",\"react_default\",\"n\",\"react_dom\",\"react_dom_default\",\"classCallCheck\",\"createClass\",\"possibleConstructorReturn\",\"getPrototypeOf\",\"inherits\",\"react_router\",\"aws_lambda\",\"isLocalhost\",\"Boolean\",\"window\",\"location\",\"match\",\"_\",\"qs\",\"src_containers_LabJsWrapper\",\"_Component\",\"LabJsWrapper\",\"props\",\"_this\",\"Object\",\"params\",\"search\",\"ignoreQueryPrefix\",\"state\",\"id\",\"sendingData\",\"link\",\"undefined\",\"surveyUrl\",\"survey_url\",\"isUndefined\",\"addScript\",\"key\",\"value\",\"labJsData\",\"exportData\",\"taskName\",\"taskVersion\",\"processLabJsData\",\"processedData\",\"length\",\"finalData\",\"that\",\"addEventListener\",\"event\",\"type\",\"parsedData\",\"json\",\"packageDataForExport\",\"setState\",\"then\",\"src\",\"callback\",\"script\",\"document\",\"createElement\",\"onreadystatechange\",\"onload\",\"head\",\"appendChild\",\"a\",\"assign\",\"className\",\"data-labjs-section\",\"style\",\"visibility\",\"Routes\",\"exact\",\"component\",\"src_App\",\"App\",\"apply\",\"arguments\",\"react_router_dom\",\"esm_history\",\"src_history\",\"render\",\"history\",\"basename\",\"getElementById\"],\"mappings\":\"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\"}","code":"(this.webpackJsonpper_rf=this.webpackJsonpper_rf||[]).push([[0],{23:function(e,t,n){\"use strict\";(function(e){n.d(t,\"b\",(function(){return i})),n.d(t,\"a\",(function(){return s}));var a=n(53),r=n(39),o=n(40);function i(t,n){return new Promise((function(i,s){var c=r.stringify({encrypted_metadata:t,data:n}),l={hostname:o.awsLambda.saveTaskData.host,port:443,path:o.awsLambda.saveTaskData.path,method:\"POST\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\",\"Content-Length\":e.byteLength(c)}},d=a.request(l,(function(e){e.setEncoding(\"utf8\"),e.on(\"data\",(function(){})),e.on(\"end\",i)}));d.on(\"error\",(function(e){o.debug&&(console.log(\"ERROR:\"),console.log(e)),s(e)})),d.write(c),d.end()}))}function s(t){return new Promise((function(n,i){var s=r.stringify({encrypted_metadata:t}),c={hostname:o.awsLambda.fetchLink.host,port:443,path:o.awsLambda.fetchLink.path,method:\"POST\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\",\"Content-Length\":e.byteLength(s)}},l=a.request(c,(function(e){e.setEncoding(\"utf8\");var t=\"\";e.on(\"data\",(function(e){t+=e})),e.on(\"end\",(function(){return n(t)}))}));l.on(\"error\",(function(e){o.debug&&(console.log(\"ERROR:\"),console.log(e)),i(e)})),l.write(s),l.end()}))}}).call(this,n(8).Buffer)},40:function(e){e.exports=JSON.parse('{\"taskVersion\":\"0.1.0\",\"taskName\":\"per_rf\",\"debug\":false,\"awsLambda\":{\"saveTaskData\":{\"host\":\"de8cnjde61.execute-api.us-east-2.amazonaws.com\",\"path\":\"/default/saveTaskData\"},\"fetchLink\":{\"host\":\"3pnzb6n9vf.execute-api.us-east-2.amazonaws.com\",\"path\":\"/default/fetchLink\"}}}')},45:function(e,t,n){e.exports=n(91)},57:function(e,t){},59:function(e,t){},71:function(e,t,n){},72:function(e,t,n){},91:function(e,t,n){\"use strict\";n.r(t);var a=n(0),r=n.n(a),o=n(42),i=n.n(o),s=n(16),c=n(17),l=n(19),d=n(18),u=n(20),p=n(6),f=n(23),h=Boolean(\"localhost\"===window.location.hostname||\"[::1]\"===window.location.hostname||window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)),m=(n(71),n(72),n(40)),v=n(73),y=n(74);n(86);var b=function(e){function t(e){var n;Object(s.a)(this,t),n=Object(l.a)(this,Object(d.a)(t).call(this,e));var a=y.parse(n.props.location.search,{ignoreQueryPrefix:!0});return n.state={encryptedMetadata:a.id,sendingData:!1,link:void 0},n.surveyUrl=a.survey_url,console.log(\"/per_rf\"),v.isUndefined(n.state.encryptedMetadata)||n.addScript(\"module\",\"/per_rf/lib/lab.js\",(function(){n.addScript(\"application/javascript\",\"/per_rf/trials.js\",(function(){n.addScript(\"module\",\"/per_rf/script.js\")}))})),n}return Object(u.a)(t,e),Object(c.a)(t,[{key:\"packageDataForExport\",value:function(e){var t={};return t.encrypted_metadata=this.state.encryptedMetadata,t.taskName=m.taskName,t.taskVersion=m.taskVersion,t.data=this.processLabJsData(e),JSON.stringify(t)}},{key:\"processLabJsData\",value:function(e){var t=[];t.push(e[0]);var n=e[e.length-1].finalData;return console.log(n),t.push(n),t}},{key:\"componentDidMount\",value:function(){var e=this;window.addEventListener(\"message\",(function(t){if(\"labjs.data\"===t.data.type){var n=JSON.parse(t.data.json);if((m.debug||h)&&(console.log(n),console.log(e.packageDataForExport(n))),h)return void(e.surveyUrl&&e.setState({link:e.surveyUrl}));e.setState({sendingData:!0}),Object(f.b)(e.state.encryptedMetadata,e.packageDataForExport(n)).then((function(){e.surveyUrl?e.setState({link:e.surveyUrl}):Object(f.a)(e.state.encryptedMetadata).then((function(t){return e.setState({link:t})}))}))}}))}},{key:\"addScript\",value:function(e,t,n){var a=document.createElement(\"script\");a.src=t,a.type=e,a.onreadystatechange=n,a.onload=n,document.head.appendChild(a)}},{key:\"render\",value:function(){return v.isUndefined(this.state.encryptedMetadata)?r.a.createElement(\"div\",null,r.a.createElement(\"h2\",null,\"Something went wrong. Please try again.\")):(v.isUndefined(this.state.link)||window.location.assign(this.state.link),r.a.createElement(\"div\",null,r.a.createElement(\"div\",{id:\"experiment\",className:\"container fullscreen\",\"data-labjs-section\":\"main\",style:{visibility:this.state.sendingData?\"hidden\":\"visible\"}},r.a.createElement(\"main\",{className:\"content-vertical-center content-horizontal-center\"},r.a.createElement(\"div\",null,r.a.createElement(\"h2\",null,\"Loading Experiment\"),r.a.createElement(\"p\",null,\"The experiment is loading and should start in a few seconds\")))),r.a.createElement(\"div\",{className:\"center\",style:{visibility:this.state.sendingData?\"visible\":\"hidden\"}},r.a.createElement(\"h2\",null,\"Saving data... do not exit window\")),r.a.createElement(\"footer\",{className:\"content-vertical-center content-horizontal-center\"})))}}]),t}(a.Component),g=function(){return r.a.createElement(p.c,null,r.a.createElement(p.a,{path:\"/\",exact:!0,component:b}))},w=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:\"render\",value:function(){return r.a.createElement(\"div\",null,r.a.createElement(g,null))}}]),t}(a.Component),k=n(22),E=n(3);n.d(t,\"history\",(function(){return j}));var j=Object(E.a)();i.a.render(r.a.createElement(k.a,{history:j,basename:\"/per_rf\"},r.a.createElement(w,null)),document.getElementById(\"root\"))}},[[45,1,2]]]);","extractedComments":[]}